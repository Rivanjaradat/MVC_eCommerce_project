@model Product
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" rel="stylesheet" />

@section PageTitle {
    <header class="bg-gradient py-5 text-end justify-content-center align-items-center" style="background: linear-gradient(to left, #ffecd2 0%, #fcb69f 100%); direction: rtl;">
        <div class="container text-dark">
            <h1 class="display-4 fw-bold">تفاصيل المنتج</h1>
            <p class="lead">اكتشف المزيد عن هذا المنتج الرائع</p>
        </div>
    </header>
}

<style>
    body {
        direction: rtl;
        font-family: 'Cairo', sans-serif;
    }

    .product-image {
        width: 100%;
        height: auto;
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        transition: transform 0.4s ease;
    }

        .product-image:hover {
            transform: scale(1.03);
        }

    .price-tag {
        font-size: 2rem;
        color: #3F7D58;
        font-weight: bold;
    }

    .striked {
        text-decoration: line-through;
        color: #999;
        font-size: 1rem;
    }

    .btn-primary {
        background: #3F7D58;
        border: none;
        transition: all 0.3s ease;
    }

        .btn-primary:hover {
            transform: scale(1.05);
            background: linear-gradient(to right, #F5F5DC, #CFC6B8);
        }

    .btn-outline-secondary:hover {
        background-color: #ff9800;
        color: white;
        border-color: #ff9800;
    }

    .smell-card {
        border: 2px solid #eee;
        border-radius: 10px;
        padding: 10px 15px;
        margin: 5px;
        cursor: pointer;
        transition: 0.3s;
    }

        .smell-card:hover,
        .btn-check:checked + .smell-card {
            background-color: #fff3e0;
            border-color: #ff9800;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

    .feature-list li::before {
        content: "✓ ";
        color: #4caf50;
        font-weight: bold;
        margin-left: 5px;
    }

    .form-control:focus {
        border-color: #ff9800;
        box-shadow: 0 0 0 0.25rem rgba(255, 152, 0, 0.25);
    }
</style>

<div class="container my-2">
    <div class="row g-5">
        <!-- الصورة -->
        <div class="col-lg-6">
            <img src="@Model.Image" alt="@Model.Name" class="product-image mb-3" id="mainImage" />
        </div>

        <!-- التفاصيل -->
        <div class="col-lg-6">
            <h2 class="fw-bold mb-3">@Model.Name</h2>

            <div class="mb-3 d-flex align-items-center gap-3">
                <span class="price-tag">$@Model.Price</span>
                @*   <span class="striked">$399.99</span>*@
            </div>

            <p class="text-muted mb-4">@Model.Description</p>

            <form asp-action="AddToCart" asp-controller="Cart" method="post">
                <input type="hidden" name="productId" value="@Model.Id" />
                <input type="hidden" name="quantity" id="formQuantity" />
                <input type="hidden" name="smellId" id="formSmellId" />

                <div class="mb-4">
                    <h6 class="fw-semibold mb-2">اختر الرائحة:</h6>
                    <div class="d-flex flex-wrap justify-content-start">
                        @foreach (var smell in ViewBag.Smells as List<Smell>)
                        {
                            var smellId = $"smell_{smell.Id}";
                            <input type="radio" class="btn-check" name="smell" id="@smellId" value="@smell.Id" autocomplete="off" />
                            <label class="smell-card" for="@smellId">@smell.Name</label>
                        }
                    </div>
                </div>

                <div class="mb-4 w-50">
                    <label for="quantity" class="form-label fw-semibold">الكمية:</label>
                    <input type="number" class="form-control" id="quantity" value="1" min="1" />
                </div>

                <div class="d-flex gap-3">
                    <button type="submit" class="btn btn-primary btn-lg shadow">
                        <i class="bi bi-cart-plus"></i> أضف إلى السلة
                    </button>
                    <button type="button" class="btn btn-outline-secondary btn-lg">
                        <i class="bi bi-heart"></i> المفضلة
                    </button>
                </div>
            </form>

            <hr class="my-4">

            <div>
                <h6 class="fw-semibold">مميزات المنتج:</h6>
                <ul class="feature-list mt-2">
                    <li>رائحة تدوم طويلاً</li>
                    <li>مكونات طبيعية وآمنة</li>
                    <li>تغليف فاخر</li>
                    <li>مثالي كهدية</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
    document.querySelector("form").addEventListener("submit", function () {
        document.getElementById("formQuantity").value = document.getElementById("quantity").value;
        const selectedSmell = document.querySelector('input[name="smell"]:checked');
        if (selectedSmell) {
            document.getElementById("formSmellId").value = selectedSmell.value;
        }
    });

    function changeImage(event, src) {
        document.getElementById('mainImage').src = src;
        document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
        event.target.classList.add('active');
    }
</script>

